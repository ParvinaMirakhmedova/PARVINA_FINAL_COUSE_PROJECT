# Проект

## Эпидемиологическая характеристика пациентов с сахарным диабетом разных типов в РТ.
  ### Исполнитель: Мирахмедова Парвина 

Проведение EDA анализа


  **Цель проекта**: сравнительная характеристика пациентов с сахарным диабетом разных типов в РТ на основе данных пациентов, находящихся на диспансерном учете в Республиканском эндокринологическом диспансере в 2012 году (материал кандидатской диссертации)

Датасет включает в себя вручную собранные данные о пациентах, находящихся на диспансерном учете в Республиканском эндокринологическом диспансере в 2012 году (материал кандидатской диссертации). 

Датасет состоит из 3 листов, каждый из которых включает в себя по одной таблице:

* Лист 1 - "Patients", включающий 7 колонок: Patient_ID,	Name,	Sex,	Address,	Level of Education,	Occupation,	Age in years.
* Лист 2 - 'Diseases", включающий 5 колонок: Patient_ID,	Nephropathy,	Neuropathy,	Smoking,	BMI.
* Лист 3 - 'Diabetic retinipathy", включающий 8 колонок: Patient_ID,	Name,	DM type,	Renal function,	Duration of DM,	Diabetic retinopathy,	Fasting blood glucose,	Hereditary.

Число строк -376 

 *** Характеристика столбцов***

 * *Patient_ID* - ID  пациента\(0-375), int64

 * *Name* - имя и фамилия пациента, категориальный (object)

 * *Sex* - пол пациента\(мужчина, женщина), категориальный (object)

 * *Address* - адрес пациента\ категориальный (object)

 * *Level of Education* - уровень образования\ ['high' 'undergraduate' nan], категориальный (object)

* *Occupation* - профессия\ категориальный (object)

* *Age in years* - возраст на момент осмотра\ (2-81), int64

* *Nephropathy* - наличие диабетической нефропатии, т.е. поражение почек вследствие сахарного диабета\ ['yes' 'no'], категориальный (object)

* *Neuropathy* - наличие диабетической нейропатии, т.е. поражение периферических нервов вследствие сахарного диабета\ ['yes' 'no'], категориальный (object)

* *Smoking* - курит ли пациент\ ['yes' 'no'], категориальный (object)

* *BMI* - индекс массы тела (ИМТ) как показатель ожирения (Недостаточный вес: ИМТ менее 18,5. Нормальный вес: ИМТ от 18,5 до 24,9. Избыточный вес: ИМТ от 25 до 29,9. Ожирение: ИМТ от 30 и выше.)\ (13.6 - 46.4), float64

* *DM type* - тип сахарного диабета: инсулиннезависимый сахарный диабет (1го типа) и инсулинзависимый сахарный диабет (2го типа) \ ['NIDDM' 'IDDM' nan], категориальный (object)

* *Renal function* - сохранение фильтрационной функции почек (наличие почечной недостаточности) \ ['impaired' 'saved' 'non-specified' nan], категориальный (object)

* *Duration of DM* - год постановки диагноза (длительность диабета)\ (1985 - 2016), int64

* *Diabetic retinopathy* - наличие диабетической ретинопатии, т.е. специфическое повреждение сетчатки глаза вследствие сахарного диабета, потенциально приводящее к тяжелым нарушениям зрительных функций вполь то слепоты\ ['Severe non-PDR' 'Mild non-PDR' 'Moderate non-PDR' 'no' 'PDR'], категориальный (object)

* *Fasting blood glucose* - уровень глюкозы крови натощак\ (4.0 - 19.0), float64

* *Hereditary* - имел ли кто из родителей сахарный диабет\ ['yes' 'no'], категориальный (object), 




### Метрики

1. *Медиана уровня глюкозы натощак у пациентов с СД* : зависимости от типа СД равно: IDDM  10.35;  NIDDM  9.60

2. *Корреляция между ИМТ и датой постановки диагноза ИМТ* - 0.17 (слабая положительная)

3. *Корреляция между ИМТ и возрастом пациентов* - 0.12(слабая положительная)

4. *Мера размаха возраста*
Диапазон: 79
Межквартильный размах (IQR): 17.0
Дисперсия: 321.88
Стандартное отклонение: 17.94

5. *Стандартное отклонение уровня глюкозы натощак* - 2.62

6. *Меры размаха bmi*
Диапазон: 32.8
Межквартильный размах (IQR): 3.8
Дисперсия: 23.27
Стандартное отклонение: 4.82


Обработка данных


**Пропущенные значения:**
У нас есть пропущенные значения в столбцах Address и Level of Education. 

**Address** (0.8% пропусков): заполним пропуски самым частым значением (модой), т.к.пропусков очень мало. Заполнение пропусков самым частым значением (модой) будет логичным,поскольку, скорее всего, большинство пациентов проживает в одном и том же городе. 
Это также помогает сохранить структуру данных, не добавляя значительных искажений.
**Level of Education** (3.2% пропусков): заполним пропуски значением "non-specified",чтобы не искажать структуру данных

У нас есть пропущенные значения в столбце **BMI**, которые составляют 30% от общего значения. Заменим их медианой, так как BMI часто имеет асимметричное распределение и медиана может быть более подходящей для предотвращения искажения данных, чем среднее значение.

У нас пропущены значения в столбцах **DM type**, **Renal function**, **Fasting blood glucose**.
Заполняем пропуски в **DM type**, **Renal function** модой, так как доля пропусков минимальна.
Заполняем пропуски в **Fasting blood glucose** медианой, так как могут быть разбросы или может быть асимметричное распределение данных и мы можем исказить структуру данных.



**Дубликаты:**

Не обнаружены дубликаты.

### **Выбросы:**

* Наличие выбросов (насколько значение отклоняется от среднего или медианы). Проверяем только числовые переменные: age, bmi,fbg. Проверяем нормальность распределения по методу Шапиро-Уилка и в случае ненормальности распределения считаем vежквартильный размах,а не z-score. 

Статистика Шапиро-Уилка: 0.9873
p-value: 0.00220
Распределение статистически отличается от нормального.
Выбросы по методу IQR:
Q1 = 7.90
Q3 = 11.50
IQR = 3.60
Границы: [2.50, 16.90]
Количество выбросов: 4
Name: fasting_blood_glucose, dtype: float64
**Вывод. Выбросы не удаляем, так как это медицинские данные. Оставляем все как есть, но используем нечувствительные к выбросам статистические методы.**

Статистика Шапиро-Уилка: 0.9446
p-value: 0.00000
Распределение статистически отличается от нормального.
Выбросы по методу IQR:
Q1 = 26.40
Q3 = 30.20
IQR = 3.80
Границы: [20.70, 35.90]
Количество выбросов: 46
Name: bmi, dtype: float64
**Вывод. Выбросы не удаляем, так как это медицинские данные. Оставляем все как есть, но используем нечувствительные к выбросам статистические методы.**

Статистика Шапиро-Уилка: 0.8692
p-value: 0.00000
Распределение статистически отличается от нормального.
Выбросы по методу IQR:
Q1 = 47.00
Q3 = 64.00
IQR = 17.00
Границы: [21.50, 89.50]
Количество выбросов: 53
Name: age_in_years, dtype: int64
**Вывод. Выбросы не удаляем, так как это медицинские данные. Оставляем все как есть, но используем нечувствительные к выбросам статистические методы.**



## Статистика,гипотезы.

### Цель: проверить, зависят ли категории dm_type и hereditary друг от друга. 
Метод: χ²-тест на независимость.

**Вывод: Есть статистически значимая связь между типом диабета и наследственностью.**

### Цель: узнать отличается ли уровень глюкозы натощак у пациентов с сохраненной и нарушенной функцией почек.
Метод: Однофакторный дисперсионный анализ (ANOVA).
 **Вывод: Уровень FBG статистически значимо различается между группами.**

## Анализ данных


**Гистограмма**
x = "bmi"    
`Описание:` ***Распределение BMI***
`Вывод:`Этот график может свидетельствовать о повышенной распространенности избыточного веса или ожирения в рассматриваемой популяции.

**Гистограмма**
x = "fasting blood glucose"    
`Описание:`***Распределение уровня глюкозы натощак***:
'Вывод' : Диаграмма показывает распределение уровня глюкозы в крови натощак (Fasting Blood Glucose в ммоль/л).Большинство значений уровня глюкозы находятся в диапазоне от 6 до 10 ммоль/л, с пиком на уровне около 8 ммоль/л, что свидетельствует о концентрации данных в этом интервале.

**Диаграмма рассеяния**
x = "bmi"
y = "fbg"
hue ="sex"
'Описание': ***Диаграмма рассеяния зависимости индекса массы тела и уровня глюкозы натощак***
'Вывод': 
**Женщины** (отмечены зелёными точками) и **мужчины** (отмечены оранжевыми точками) распределяются достаточно равномерно по всему диапазону значений индекса  массы тела. В целом, для обеих групп уровень глюкозы натощак варьируется между 4 и 18 ммоль/л, но с увеличением индекса массы тела наблюдается тенденция к увеличению уровня глюкозы натощак. Это может говорить о том, что люди с более высоким BMI имеют более высокие уровни глюкозы.
**Корреляция**:
   - **Положительная корреляция** между BMI и уровнем глюкозы натощак: люди с более высоким BMI, как правило, имеют более высокие уровни глюкозы.
   - Это может быть связано с метаболическими нарушениями, часто встречающимися у людей с ожирением.
**Половые различия в уровне глюкозы**:
   - Кажется, что женщины и мужчины имеют схожие уровни глюкозы на разных значениях BMI, но не исключено, что могут быть некоторые различия на конкретных уровнях, которые требуют более детального анализа.

Это может свидетельствовать о важности контроля уровня глюкозы и поддержания здорового веса для предотвращения развития диабета. 

**Круговая диаграмма**
на основании dm_type
'Описание': Распределение пациентов по типу диабета
'Вывод':Большинство людей в выборке страдают диабетом типа NIDDM (инсулин-независимым типом диабета), что является более распространённым типом диабета. IDDM встречается реже, что соответствует общим статистическим данным о типах диабета.

**Столбчатая диаграмма**
Рассчитываем средний возраст по полу
avg_age_by_sex = merged_df.groupby('sex')['age_in_years'].mean()
"Описание": ***Столбчатая диаграмма, отражающая зависимость среднего возраста от пола***
"Вывод": Разница в среднем возрасте между женщинами и мужчинами составляет примерно 4 года (женщины более страшего возраства), что может быть связано с различиями в здоровье или возрастной структуре выборки.

**Диаграмма рассеяния**
 x='age_in_years',
y='bmi',
hue='dm_type'
" Описание": *** Диаграмма рассеяния: тип диабета по возрасту и BMI***
"Вывод": **Распределение по возрасту**:
   - Люди с диабетом типа **NIDDM** имеют более широкий диапазон возрастов (от молодых до более старых людей), что может указывать на более широкий спектр факторов, влияющих на этот тип диабета.
   - Люди с диабетом типа **IDDM** в основном сосредоточены в более молодом возрасте (меньше 40 лет), что может быть связано с тем, что этот тип диабета обычно диагностируется в детском или подростковом возрасте, так как связан с врожденным недостатком инсулина.

3. **Распределение по BMI**:
   - Для **NIDDM** большинство людей имеют значения BMI, которые колеблются от 25 до 35, что может указывать на повышенный риск ожирения для людей с этим типом диабета.
   - Для **IDDM** BMI кажется более разнообразным, но большая часть людей также имеет BMI около 25-30. 

4. **Корреляция между возрастом и BMI**: Хотя на первый взгляд кажется, что возраст не сильно влияет на BMI, всё же можно заметить, что с возрастом BMI может увеличиваться у людей с типом NIDDM, что может отражать изменения в образе жизни и метаболизме с возрастом.

Таким образом, можно сделать вывод, что возраст и тип диабета имеют различное влияние на BMI, и тип диабета может быть связан с определёнными возрастными группами и состоянием здоровья.

## Заключение



**Метрики и ключевые выводы:**

1. **Медиана уровня глюкозы натощак у пациентов с СД:**
   - **IDDM:** 10.35 ммоль/л
   - **NIDDM:** 9.60 ммоль/л
   - **Вывод:** У пациентов с инсулинозависимым диабетом уровень глюкозы натощак выше по сравнению с пациентами с инсулиннезависимым диабетом.

2. **Корреляция между ИМТ и датой постановки диагноза ИМТ:**
   - Корреляция: **0.17** (слабая положительная)
   - **Вывод:** Существует слабая положительная связь между индексом массы тела (ИМТ) и годом постановки диагноза диабет, что может свидетельствовать о незначительном увеличении ИМТ с течением времени.

3. **Корреляция между ИМТ и возрастом пациентов:**
   - Корреляция: **0.12** (слабая положительная)
   - **Вывод:** Существует слабая положительная связь между ИМТ и возрастом, что может означать, что с возрастом ИМТ пациентов с диабетом немного увеличивается.

4. **Мера размаха возраста:**
   - **Диапазон:** 79 лет
   - **Межквартильный размах (IQR):** 17.0 лет
   - **Дисперсия:** 321.88
   - **Стандартное отклонение:** 17.94
   - **Вывод:** Возраст пациентов варьируется от 2 до 81 года, что свидетельствует о широком возрастном диапазоне среди пациентов с диабетом.

5. **Стандартное отклонение уровня глюкозы натощак:**
   - **2.62 ммоль/л**
   - **Вывод:** Стандартное отклонение уровня глюкозы натощак умеренное, что подтверждает наличие вариативности в уровне глюкозы среди пациентов.

6. **Меры размаха BMI:**
   - **Диапазон:** 32.8
   - **Межквартильный размах (IQR):** 3.8
   - **Дисперсия:** 23.27
   - **Стандартное отклонение:** 4.82
   - **Вывод:** ИМТ варьируется от 13.6 до 46.4, что указывает на наличие пациентов как с нормальной массой тела, так и с избыточным весом и ожирением.

---

**Интерпретации графиков:**

1. **Гистограмма "BMI":**
   - **Описание:** Распределение ИМТ среди пациентов.
   - **Вывод:** Диаграмма показывает, что в рассматриваемой популяции наблюдается высокая распространенность избыточного веса или ожирения. Это может быть связано с повышенным риском метаболических нарушений, таких как диабет.

2. **Гистограмма "Fasting blood glucose":**
   - **Описание:** Распределение уровня глюкозы натощак.
   - **Вывод:** Большинство значений уровня глюкозы находятся в диапазоне от 6 до 10 ммоль/л, что говорит о концентрации данных в этом интервале и может указывать на норму для большинства пациентов.

3. **Диаграмма рассеяния (BMI vs FBG):**
   - **Описание:** Зависимость между индексом массы тела и уровнем глюкозы натощак, разделенная по полу.
   - **Вывод:** Женщины и мужчины распределяются по диапазону значений BMI с тенденцией к увеличению уровня глюкозы натощак с увеличением BMI. Это подтверждает существование взаимосвязи между ожирением и повышенным уровнем глюкозы.

4. **Круговая диаграмма по типу диабета (DM type):**
   - **Описание:** Распределение пациентов по типу диабета.
   - **Вывод:** Большинство пациентов страдают инсулиннезависимым диабетом (NIDDM), что соответствует общим мировым тенденциям.

5. **Столбчатая диаграмма среднего возраста по полу:**
   - **Описание:** Средний возраст по полу.
   - **Вывод:** Средний возраст женщин в выборке немного выше, что может быть связано с различиями в продолжительности жизни или особенностями диагностики диабета в более позднем возрасте среди женщин.

6. **Диаграмма рассеяния (Age vs BMI по типу диабета):**
   - **Описание:** Распределение возраста и ИМТ по типам диабета.
   - **Вывод:** Пациенты с диабетом типа NIDDM имеют более широкий диапазон возрастов, что указывает на более разнообразные возрастные группы для этого типа диабета. В то время как для диабета типа IDDM, в основном, пациенты моложе 40 лет.

---

**Ключевые выводы:**

- Существует положительная корреляция между ИМТ и уровнем глюкозы натощак, что подтверждает важность контроля массы тела в профилактике диабета.
- Уровень глюкозы натощак имеет заметное распределение в интервале от 6 до 10 ммоль/л.
- Ожирение и избыточный вес являются распространенными проблемами среди пациентов с диабетом, что требует внимания к профилактическим мерам.
- Есть различия в возрастной структуре пациентов с диабетом разных типов, с большим диапазоном возраста среди пациентов с NIDDM.

**Аномалии и неожиданные результаты:**

- В данных были выявлены выбросы по нескольким числовым переменным (уровень глюкозы натощак, BMI, возраст), однако они были оставлены для сохранения медицинской достоверности данных. Не исключено, что эти выбросы могут быть вызваны различиями в медицинских показаниях или лечениях.

- Анализ показал, что существует слабая положительная корреляция между возрастом и индексом массы тела, что может указывать на тенденцию увеличения массы тела с возрастом, особенно среди людей с диабетом типа NIDDM.

**Рекомендации и направления для дальнейших исследований:**

-Углубленный анализ факторов риска: Рекомендуется исследовать влияние других факторов риска, таких как уровень образования, курение и профессия, на развитие диабета, чтобы выявить возможные социальные и поведенческие детерминанты.

-Исследование взаимосвязи между диабетической ретинопатией и другими осложнениями: Поскольку диабетическая ретинопатия встречается у значительной части пациентов, стоит изучить ее связь с другими осложнениями, такими как нефропатия и нейропатия.

-Мониторинг динамики уровня глюкозы: Рекомендуется следить за изменениями уровня глюкозы натощак среди пациентов с различными типами диабета и BMI, чтобы улучшить лечение и профилактику.

Таким образом, результаты анализа подчеркивают важность контроля массы тела и уровня глюкозы у пациентов с диабетом, а также необходимость комплексного подхода к лечению и профилактике данного заболевания.

